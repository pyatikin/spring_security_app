Что используем
● Java Spring
● Spring Security
● Keycloak (c PostgreSQL DB)
● Docker + Compose
Что надо сделать
1. Реализовать простое веб-приложение с использованием Java Spring.
Тематика – на ваш вкус. Требований к контенту, хранению в БД и т.д. нет.
Что должно быть
a. Главная страница (лендинг), доступный без авторизации всем (а-ля у
нас классный сервис, регистрируйтесь)
b. Страница регистрации и логина (можно брать стандартную из
Keycloak, можете свою красивую форму для нее сделать)
c. Страница, которая доступна любому зарегистрированному
пользователю (а-ля личный кабинет, данные какие-то по клиенту и
т.д.)
d. Страница, которая должна быть доступна только администратору
(а-ля какая-то админка)
2. Подключить Spring Security и подружить это с Keycloak. Настроить
авторизацию и аутентификацию, настроить роли “user” и “admin”
3. Запаковать приложение в docker compose. Главное требование – при
проверке должно быть достаточно сделать docker compose up и все должно
работать
4. Показать клиентский путь и продемонстрировать со скриншотами в
README регистрацию, вход, назначение ему в Keycloak роли
администратора (и как меняется веб-приложение при этом действии для
него)
5. В вашем приложении должна быть настроена защита от CSRF
6. В вашем приложении должны быть настроены CORS Policy
7. Сделайте так, чтобы в ваше приложение можно было попадать только через
NGINX. Рекомендую делать по DNS записям так: «example.com» – ваше
приложение, а «api.example.com» – ваше API для него. Добавить такие
записи при отсутствии DNS сервера можно через /etc/hosts в UNIX-like
системах
8. Настройте на NGINX базовый MTLS. Выпустите свой CA для клиентов и
настройте его так, чтобы если к вам обращались без сертификата, то
получали бы ошибку 403 (работающий пример -
https://smallstep.com/hello-mtls/doc/server/nginx)
9. При помощи переменной $ssl_client_s_dn отразите в NGINX логах
log_format DN сертификата.
10.Выпустите клиентский сертификат, установите в систему CA для доверия и
клиентский сертификат. Продемонстрируйте, что при работе с браузером не
возникает ошибок самоподписанного сертификата. Проверьте, что в логи
NGINX попала запись о ваших похождениях